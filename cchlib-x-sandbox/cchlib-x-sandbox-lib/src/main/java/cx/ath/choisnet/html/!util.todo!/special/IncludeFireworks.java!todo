/*
** $VER: IncludeFireworks.java
*/
package jrpdk.servlet.htmlGenerator.util.special;

import jrpdk.servlet.htmlGenerator.util.HTMLBuilderDebugger;
import jrpdk.servlet.htmlGenerator.util.IncludeHTMLFile;
import jrpdk.servlet.htmlGenerator.util.IncludeHTMLFileTagsException;
import java.io.FileReader;
import java.io.Writer;

/**
**
** <B>Exemple:</B>
** <PRE>
**  // Définition de l'URL de base pour les images
**  String imagesURLBase = URL_DES_IMAGES + "caddie_03/";
**
** // Chemin complet du fichier html pour le traitement
** String HTMLFileName = CHEMIN_UNIX_DES_IMAGES + "caddie_03" + File.separator + "caddie.htm";
**
**
** // Construction de l'objet de gestion des images Fireworks
** IncludeFireworks includeImage;
** StringWriter     buffer = new StringWriter();
**
** try {
**    includeImage = new IncludeFireworks( new FileReader( HTMLFileName ), buffer );
**
**    includeImage.replace( "$IMAGES$", imagesURLBase + "$IMAGES$" );
**
**    // AIDE
**    includeImage.replace( "\"$URL_AIDE$\"", "'" + urlAide + "'" );
**    includeImage.replace( "$ALT_AIDE$", MsgAide );
**
**    // Reserver
**    includeImage.replace( "\"$URL_RESERVER$\"", "'" + urlOpenPanierReserverParType + "'" );
**    includeImage.replace( "$ALT_RESERVER$", MsgReserver );
**
**    // Voir panier
**    includeImage.replace( "\"$URL_PANIER$\"", "'"+ urlOpenPanier + "'" );
**    includeImage.replace( "$ALT_PANIER$", MsgVoirPanier );
**
**    includeImage.printHTML();
**
**    stringResultat = buffer.toString();
**    }
** catch( java.io.FileNotFoundException e ) {
**    ...
**    }
** catch( IncludeHTMLFileTagsException e ) {
**    ...
**    }
** </PRE>
**
** @author Claude CHOISNET
** @version 1.00 23/11/2000
**
** @see IncludeHTMLFile
*/
public class IncludeFireworks
{
private FileReader      inputFileReader;
private IncludeHTMLFile includeHTMLFile;

/**
** Construction de l'analyseur en utilisant le flux output pour le
** stockage du résultat.
**
** @param input     Gestionnaire du fichier à analyser
** @param output    Flux de sortie
*/
public IncludeFireworks( // -----------------------------------------------
    FileReader  input,
    Writer      output
    )
{
 try {
    this.inputFileReader   = input;
    this.includeHTMLFile   = new IncludeHTMLFile( output );

    this.includeHTMLFile.setBeginTag(
        "BEGIN COPYING THE HTML",
        IncludeHTMLFile.MATCH_MODE_IN_THE_LINE,
        IncludeHTMLFile.ACTION_MODE_REMOVE_LINE
        );

    this.includeHTMLFile.setEndTag(
       "STOP COPYING THE HTML",
       IncludeHTMLFile.MATCH_MODE_IN_THE_LINE,
       IncludeHTMLFile.ACTION_MODE_REMOVE_LINE
       );
    }
 catch( IncludeHTMLFileTagsException bugInterne ) {
    HTMLBuilderDebugger.trace( this, bugInterne, "Bug INTERNE" );
    }
}

/**
**
** @exception   IncludeHTMLFileTagsException lorsqu'une erreur est arrive
**              lors de la construction du gestionnaire de recherche des
**              sous partie du fichier.
*/
public void replace( // ---------------------------------------------------
    String  oldSubString,
    String  newSubString
    )
    throws IncludeHTMLFileTagsException
{
 includeHTMLFile.replaceTagWith(
    oldSubString,
    newSubString,
    IncludeHTMLFile.MATCH_MODE_TAG_ONLY,
    IncludeHTMLFile.ACTION_MODE_REPLACE_TAG_ONLY
    );
}

/**
** Effectue l'analyse et dépose le résultat dans le flux de sortie.
*/
public void printHTML() // ------------------------------------------------
    throws java.io.IOException
{
 includeHTMLFile.print( inputFileReader );
}

} // class
